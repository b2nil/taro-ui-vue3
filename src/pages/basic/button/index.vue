<template>
  <page header-title="Button æŒ‰é’®">
    <!-- ä¸»æ“ä½œ -->
    <panel title="ä¸»æ“ä½œ">
      <view class="btn-item">
        <at-button
          type="primary"
          @click="handleButtonClick"
        >ä¸»è¦æ“ä½œæŒ‰é’®</at-button>
      </view>
      <view class="btn-item">
        <at-button
          loading
          type="primary"
          @click="handleButtonClick"
        >åŠ è½½ä¸­</at-button>
      </view>
      <view class="btn-item">
        <at-button
          disabled
          type="primary"
        >ä¸å¯æ“ä½œ</at-button>
      </view>
    </panel>

    <!-- æ¬¡è¦æ“ä½œ -->
    <panel title="æ¬¡è¦æ“ä½œ">
      <view class="btn-item">
        <at-button type="secondary">æ¬¡è¦æ“ä½œ</at-button>
      </view>
      <view class="btn-item">
        <at-button
          loading
          type="secondary"
        >åŠ è½½ä¸­</at-button>
      </view>
      <view class="btn-item">
        <at-button
          disabled
          type="secondary"
        >ä¸å¯æ“ä½œ</at-button>
      </view>
    </panel>

    <!-- æ¬¡æ¬¡è¦æ“ä½œ -->
    <panel title="æ¬¡æ¬¡è¦æ“ä½œ">
      <view class="btn-item">
        <at-button>æ¬¡æ¬¡è¦æ“ä½œ</at-button>
      </view>
      <view class="btn-item">
        <at-button loading>åŠ è½½ä¸­</at-button>
      </view>
      <view class="btn-item">
        <at-button disabled>ä¸å¯æ“ä½œ</at-button>
      </view>
    </panel>

    <!-- é€šæ æŒ‰é’® -->
    <panel title="é€šæ æŒ‰é’®">
      <view class="btn-item">
        <at-button
          full
          type="primary"
        >ä¸»æ“ä½œæŒ‰é’®</at-button>
      </view>
      <view class="btn-item">
        <at-button
          full
          type="secondary"
        >æ¬¡æ“ä½œæŒ‰é’®</at-button>
      </view>
      <view class="btn-item">
        <at-button full>æ¬¡æ¬¡æ“ä½œæŒ‰é’®</at-button>
      </view>
      <view class="btn-item">
        <at-button
          full
          disabled
        >ä¸å¯æ“ä½œ</at-button>
      </view>
    </panel>

    <!-- å°æŒ‰é’® -->
    <panel title="å°æŒ‰é’®">
      <view class="btn-item">
        <view class="subitem">
          <at-button
            type="primary"
            size="small"
          >æŒ‰é’®</at-button>
        </view>
        <view class="subitem">
          <at-button
            type="secondary"
            size="small"
          >æŒ‰é’®</at-button>
        </view>
        <view class="subitem">
          <at-button size="small">æŒ‰é’®</at-button>
        </view>
      </view>
      <view class="btn-item">
        <view class="subitem">
          <at-button
            loading
            type="primary"
            size="small"
          ></at-button>
        </view>
        <view class="subitem">
          <at-button
            loading
            type="secondary"
            size="small"
          ></at-button>
        </view>
        <view class="subitem">
          <at-button
            loading
            size="small"
          ></at-button>
        </view>
      </view>
      <view class="btn-item">
        <view class="subitem">
          <at-button
            disabled
            type="primary"
            size="small"
          >æŒ‰é’®</at-button>
        </view>
        <view class="subitem">
          <at-button
            disabled
            type="secondary"
            size="small"
          >æŒ‰é’®</at-button>
        </view>
        <view class="subitem">
          <at-button
            disabled
            size="small"
          >æŒ‰é’®</at-button>
        </view>
      </view>
    </panel>

    <!-- åœ†è§’æŒ‰é’® -->
    <panel title="åœ†è§’æŒ‰é’®">
      <view class="btn-item">
        <view class="subitem">
          <at-button
            circle
            type="primary"
            size="small"
          >æŒ‰é’®</at-button>
        </view>
        <view class="subitem">
          <at-button
            circle
            type="secondary"
            size="small"
          >æŒ‰é’®</at-button>
        </view>
        <view class="subitem">
          <at-button
            circle
            size="small"
          >æŒ‰é’®</at-button>
        </view>
      </view>
      <view class="btn-item">
        <view class="subitem">
          <at-button
            circle
            loading
            type="primary"
            size="small"
          ></at-button>
        </view>
        <view class="subitem">
          <at-button
            circle
            loading
            type="secondary"
            size="small"
          ></at-button>
        </view>
        <view class="subitem">
          <at-button
            circle
            loading
            size="small"
          ></at-button>
        </view>
      </view>
      <view class="btn-item">
        <view class="subitem">
          <at-button
            circle
            disabled
            type="primary"
            size="small"
          >æŒ‰é’®</at-button>
        </view>
        <view class="subitem">
          <at-button
            circle
            disabled
            type="secondary"
            size="small"
          >æŒ‰é’®</at-button>
        </view>
        <view class="subitem">
          <at-button
            circle
            disabled
            size="small"
          >æŒ‰é’®</at-button>
        </view>
      </view>
    </panel>

    <!-- å¾®ä¿¡å°ç¨‹åº button å±æ€§ï¼ˆä»…éƒ¨åˆ†æ”¯æŒï¼‰ -->
    <panel title="å¾®ä¿¡å°ç¨‹åº button å±æ€§">
      <view class="btn-item">
        <at-button
          type="primary"
          openType="share"
        >åˆ†äº«</at-button>
      </view>
      <view class="btn-item">
        <at-button
          type="primary"
          openType="getUserInfo"
          @get-user-info="onGetUserInfo"
        >ç™»å½•æˆæƒ</at-button>
      </view>
      <view class="btn-item">
        <at-button
          type="secondary"
          openType="contact"
          @contact="onContact"
        >è”ç³» Taro UI å®¢æœ</at-button>
      </view>
      <view class="btn-item">
        <at-form
          report-submit
          @submit="onSubmit"
          @reset="onReset"
        >
          <view class="btn-item">
            <at-button
              type="primary"
              formType="submit"
            >è¡¨æ ¼æäº¤</at-button>
          </view>
          <view class="btn-item">
            <at-button
              type="secondary"
              formType="reset"
            >è¡¨æ ¼é‡ç½®</at-button>
          </view>
        </at-form>
      </view>
    </panel>

    <!-- æ”¯ä»˜å®å°ç¨‹åº button å±æ€§ï¼ˆä»…éƒ¨åˆ†æ”¯æŒï¼‰ -->
    <panel
      class="demo-button"
      title="æ”¯ä»˜å®å°ç¨‹åº button å±æ€§"
      v-if="isALIPAY"
    >
      <view class="btn-item">
        <at-button
          type="primary"
          openType="share"
        >åˆ†äº«</at-button>
      </view>
      <view class="btn-item">
        <at-button
          type="primary"
          openType="getAuthorize"
        >ç™»å½•æˆæƒ</at-button>
      </view>
      <at-form
        @submit="onSubmit"
        @reset="onReset"
      >
        <view class="btn-item">
          <at-button
            type="primary"
            formType="submit"
          >è¡¨æ ¼æäº¤</at-button>
        </view>
        <view class="btn-item">
          <at-button
            type="secondary"
            formType="reset"
          >è¡¨æ ¼é‡ç½®</at-button>
        </view>
      </at-form>
    </panel>

    <!-- æµ®åŠ¨æŒ‰é’® -->
    <panel
      title="æµ®åŠ¨æŒ‰é’®"
      v-if="!isALIPAY"
    >
      <view class="at-article__p">å³ä¾§æ˜¯æµ®åŠ¨æ“ä½œæŒ‰é’®ğŸ‘‰</view>
      <view class="btn-demo-fab">
        <at-fab @click="handleButtonClick">
          <text class="at-fab__icon at-icon at-icon-menu"></text>
        </at-fab>
      </view>
    </panel>
  </page>
</template>

<script lang="ts">
import { defineComponent, reactive, toRefs } from "vue"
import Taro from "@tarojs/taro"
import AtButton from "@/components/button"
import AtFab from "@/components/fab"
import AtForm from "@/components/form"
import { Page, Panel, ExampleItem } from "../../components/demo-page"

import "./index.scss"

export default defineComponent({
  name: "ButtonDemo",

  components: {
    Page,
    Panel,
    ExampleItem,
    AtButton,
    AtFab,
    AtForm
  },

  setup() {

    const state = reactive({
      isWEAPP: Taro.getEnv() === Taro.ENV_TYPE.WEAPP,
      isALIPAY: Taro.getEnv() === Taro.ENV_TYPE.ALIPAY,
      isWEB: Taro.getEnv() === Taro.ENV_TYPE.WEB,
    })

    function handleButtonClick() {
      const content = [...arguments].find(item => typeof item === 'string')
      if (state.isWEAPP) {
        Taro.showModal({
          content: content || 'æ‚¨ç‚¹å‡»äº†æŒ‰é’®ï¼',
          showCancel: false
        })
      }

      if (state.isWEB) {
        alert(content || 'æ‚¨ç‚¹å‡»äº†æŒ‰é’®ï¼')
      }
    }

    function onShareAppMessage() {
      return {
        title: 'Taro UI',
        path: '/pages/index/index',
        imageUrl: 'http://storage.360buyimg.com/mtd/home/share1535013100318.jpg'
      }
    }

    function onContact(event) {
      Taro.showToast({
        title: `å‘¼èµ·å®¢æœå›è°ƒ: ${event.detail}`
      })
    }

    function onSubmit(event) {
      Taro.showModal({
        content: `submit event detail: ${JSON.stringify(event.detail)}`,
        showCancel: false
      })
    }

    function onReset(event) {
      Taro.showModal({
        content: `reset event detail: ${JSON.stringify(
          event.detail || 'æ— æ•°æ®'
        )}`,
        showCancel: false
      })
    }

    function onGetUserInfo(event) {
      Taro.showModal({
        content: `getUserInfo event detail: ${JSON.stringify(event.detail)}`
      })
    }

    function onOpenSetting(event) {
      Taro.showToast({
        title: `onOpenSetting: ${event.detail}`
      })
    }


    return {
      ...toRefs(state),
      handleButtonClick,
      onShareAppMessage,
      onContact,
      onSubmit,
      onReset,
      onGetUserInfo,
      onOpenSetting
    }
  }
})
</script>
